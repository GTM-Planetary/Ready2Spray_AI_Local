{
  "query": "\nCREATE TABLE IF NOT EXISTS zones (\n  id SERIAL PRIMARY KEY,\n  site_id INTEGER NOT NULL REFERENCES sites(id) ON DELETE CASCADE,\n  name VARCHAR(100) NOT NULL,\n  zone_type zone_type NOT NULL,\n  description TEXT,\n  special_instructions TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS equipment (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  name VARCHAR(255) NOT NULL,\n  equipment_type equipment_type NOT NULL,\n  tail_number VARCHAR(50),\n  license_plate VARCHAR(50),\n  serial_number VARCHAR(100),\n  tank_capacity NUMERIC(10, 2),\n  swath_width NUMERIC(10, 2),\n  max_speed NUMERIC(10, 2),\n  status equipment_status DEFAULT 'active',\n  last_maintenance_date DATE,\n  next_maintenance_date DATE,\n  maintenance_notes TEXT,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS products_new (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  epa_reg_number VARCHAR(50) NOT NULL,\n  brand_name VARCHAR(255) NOT NULL,\n  product_name VARCHAR(255) NOT NULL,\n  manufacturer VARCHAR(255),\n  active_ingredients JSONB,\n  product_type product_type NOT NULL,\n  signal_word signal_word NOT NULL,\n  is_rup BOOLEAN DEFAULT FALSE,\n  indoor_allowed BOOLEAN DEFAULT FALSE,\n  outdoor_allowed BOOLEAN DEFAULT TRUE,\n  aerial_allowed BOOLEAN DEFAULT FALSE,\n  ground_boom_allowed BOOLEAN DEFAULT TRUE,\n  backpack_allowed BOOLEAN DEFAULT FALSE,\n  hand_wand_allowed BOOLEAN DEFAULT FALSE,\n  ulv_allowed BOOLEAN DEFAULT FALSE,\n  chemigation_allowed BOOLEAN DEFAULT FALSE,\n  use_sites JSONB,\n  label_pdf_url TEXT,\n  sds_url TEXT,\n  manufacturer_url TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS product_use (\n  id SERIAL PRIMARY KEY,\n  product_id INTEGER NOT NULL REFERENCES products_new(id) ON DELETE CASCADE,\n  crop VARCHAR(100),\n  pest VARCHAR(100),\n  site_category VARCHAR(100),\n  min_rate NUMERIC(10, 4),\n  max_rate NUMERIC(10, 4),\n  rate_unit VARCHAR(50),\n  max_applications_per_season INTEGER,\n  max_total_per_season NUMERIC(10, 4),\n  max_total_unit VARCHAR(50),\n  min_carrier_volume NUMERIC(10, 2),\n  max_carrier_volume NUMERIC(10, 2),\n  carrier_unit VARCHAR(50),\n  phi_days INTEGER,\n  rei_hours INTEGER,\n  reentry_conditions TEXT,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS service_plans (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  customer_id INTEGER NOT NULL REFERENCES customers(id),\n  site_id INTEGER REFERENCES sites(id),\n  plan_name VARCHAR(255) NOT NULL,\n  plan_type service_plan_type NOT NULL,\n  start_date DATE NOT NULL,\n  end_date DATE,\n  next_service_date DATE,\n  default_zones JSONB,\n  default_products JSONB,\n  default_target_pests JSONB,\n  price_per_service NUMERIC(10, 2),\n  currency VARCHAR(10) DEFAULT 'USD',\n  status service_plan_status DEFAULT 'active',\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS applications (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  job_id INTEGER NOT NULL REFERENCES jobs(id),\n  site_id INTEGER REFERENCES sites(id),\n  customer_id INTEGER REFERENCES customers(id),\n  applicator_id INTEGER REFERENCES personnel(id),\n  supervisor_id INTEGER REFERENCES personnel(id),\n  equipment_id INTEGER REFERENCES equipment(id),\n  application_date DATE NOT NULL,\n  start_time TIME,\n  end_time TIME,\n  products_applied JSONB,\n  acres_treated NUMERIC(10, 2),\n  area_unit VARCHAR(20) DEFAULT 'acres',\n  application_method application_method NOT NULL,\n  temperature_f NUMERIC(5, 2),\n  wind_speed_mph NUMERIC(5, 2),\n  wind_direction VARCHAR(10),\n  humidity_percent NUMERIC(5, 2),\n  weather_conditions VARCHAR(255),\n  target_pest VARCHAR(255),\n  crop VARCHAR(100),\n  phi_date DATE,\n  rei_datetime TIMESTAMP,\n  completed_by_id INTEGER REFERENCES users(id),\n  verified_by_id INTEGER REFERENCES users(id),\n  verification_date DATE,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 3LAnvSXMR8umuBe.cb88ed38e99c --database 6adCeCxV2Yg38ygq7gdRsu --execute \nCREATE TABLE IF NOT EXISTS zones (\n  id SERIAL PRIMARY KEY,\n  site_id INTEGER NOT NULL REFERENCES sites(id) ON DELETE CASCADE,\n  name VARCHAR(100) NOT NULL,\n  zone_type zone_type NOT NULL,\n  description TEXT,\n  special_instructions TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS equipment (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  name VARCHAR(255) NOT NULL,\n  equipment_type equipment_type NOT NULL,\n  tail_number VARCHAR(50),\n  license_plate VARCHAR(50),\n  serial_number VARCHAR(100),\n  tank_capacity NUMERIC(10, 2),\n  swath_width NUMERIC(10, 2),\n  max_speed NUMERIC(10, 2),\n  status equipment_status DEFAULT 'active',\n  last_maintenance_date DATE,\n  next_maintenance_date DATE,\n  maintenance_notes TEXT,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS products_new (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  epa_reg_number VARCHAR(50) NOT NULL,\n  brand_name VARCHAR(255) NOT NULL,\n  product_name VARCHAR(255) NOT NULL,\n  manufacturer VARCHAR(255),\n  active_ingredients JSONB,\n  product_type product_type NOT NULL,\n  signal_word signal_word NOT NULL,\n  is_rup BOOLEAN DEFAULT FALSE,\n  indoor_allowed BOOLEAN DEFAULT FALSE,\n  outdoor_allowed BOOLEAN DEFAULT TRUE,\n  aerial_allowed BOOLEAN DEFAULT FALSE,\n  ground_boom_allowed BOOLEAN DEFAULT TRUE,\n  backpack_allowed BOOLEAN DEFAULT FALSE,\n  hand_wand_allowed BOOLEAN DEFAULT FALSE,\n  ulv_allowed BOOLEAN DEFAULT FALSE,\n  chemigation_allowed BOOLEAN DEFAULT FALSE,\n  use_sites JSONB,\n  label_pdf_url TEXT,\n  sds_url TEXT,\n  manufacturer_url TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS product_use (\n  id SERIAL PRIMARY KEY,\n  product_id INTEGER NOT NULL REFERENCES products_new(id) ON DELETE CASCADE,\n  crop VARCHAR(100),\n  pest VARCHAR(100),\n  site_category VARCHAR(100),\n  min_rate NUMERIC(10, 4),\n  max_rate NUMERIC(10, 4),\n  rate_unit VARCHAR(50),\n  max_applications_per_season INTEGER,\n  max_total_per_season NUMERIC(10, 4),\n  max_total_unit VARCHAR(50),\n  min_carrier_volume NUMERIC(10, 2),\n  max_carrier_volume NUMERIC(10, 2),\n  carrier_unit VARCHAR(50),\n  phi_days INTEGER,\n  rei_hours INTEGER,\n  reentry_conditions TEXT,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS service_plans (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  customer_id INTEGER NOT NULL REFERENCES customers(id),\n  site_id INTEGER REFERENCES sites(id),\n  plan_name VARCHAR(255) NOT NULL,\n  plan_type service_plan_type NOT NULL,\n  start_date DATE NOT NULL,\n  end_date DATE,\n  next_service_date DATE,\n  default_zones JSONB,\n  default_products JSONB,\n  default_target_pests JSONB,\n  price_per_service NUMERIC(10, 2),\n  currency VARCHAR(10) DEFAULT 'USD',\n  status service_plan_status DEFAULT 'active',\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n\nCREATE TABLE IF NOT EXISTS applications (\n  id SERIAL PRIMARY KEY,\n  org_id INTEGER NOT NULL REFERENCES organizations(id),\n  job_id INTEGER NOT NULL REFERENCES jobs(id),\n  site_id INTEGER REFERENCES sites(id),\n  customer_id INTEGER REFERENCES customers(id),\n  applicator_id INTEGER REFERENCES personnel(id),\n  supervisor_id INTEGER REFERENCES personnel(id),\n  equipment_id INTEGER REFERENCES equipment(id),\n  application_date DATE NOT NULL,\n  start_time TIME,\n  end_time TIME,\n  products_applied JSONB,\n  acres_treated NUMERIC(10, 2),\n  area_unit VARCHAR(20) DEFAULT 'acres',\n  application_method application_method NOT NULL,\n  temperature_f NUMERIC(5, 2),\n  wind_speed_mph NUMERIC(5, 2),\n  wind_direction VARCHAR(10),\n  humidity_percent NUMERIC(5, 2),\n  weather_conditions VARCHAR(255),\n  target_pest VARCHAR(255),\n  crop VARCHAR(100),\n  phi_date DATE,\n  rei_datetime TIMESTAMP,\n  completed_by_id INTEGER REFERENCES users(id),\n  verified_by_id INTEGER REFERENCES users(id),\n  verification_date DATE,\n  notes TEXT,\n  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL\n);\n",
  "returncode": 1,
  "logs": [
    "ERROR 1064 (42000) at line 2: You have an error in your SQL syntax; check the manual that corresponds to your TiDB version for the right syntax to use line 5 column 22 near \"zone_type NOT NULL,",
    "  description TEXT,",
    "  special_instructions TEXT,",
    "  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL",
    ")\""
  ]
}